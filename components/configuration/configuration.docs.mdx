---
displayName: 'Configuration'
description: 'Application configuration component'
labels: ['components', 'configuration']
---

## Overview

Purpose of this component is to build a configuration object based on current environment using the
baseline config found in the configuration.ts file in the root of this component

The configuration system requires two environment variables in order to materialise the configuration with
settings for the appropriate environment.

Please add this environment variable for development environments

```js
export HECTARE_DEV="eyJrZXkiOiJGNjg4Qjk2RTY0Nzk0NTcxODU0QkVGMkMzOTJCOUIxNSIsImVudmlyb25tZW50IjoiZGV2Iiwic2FsdCI6InNvbWV0aGluZ3JhbmRvbSJ9"
```

If you have local overides you need to add this environment variable which is a pointer to the override file on your local

```js
export HECTARE_DEV_OVERRIDES="/Users/nchampion/Dev/Repositories/config_overides.json"
```

Your local overrides file should look like this where the property name is a path to the config value you
want to replace and the property value is the replacement value

```js
{
  "cache.prefix": "nick",
  "database.connection": "postgres://hectare:admin@postgres:5432/hectare"
}
```

Configuration is JSON, example as follows

```js
export const configuration = {
  production: {
    default: false,
    prod: true
  },
  dev: {
    default: false,
    dev: true
  },
  defaults: {
    page_size: 25
  },
  node_path: '.:/opt/node_modules',
  courier: {
    api_key: {
      encrypted: true,
      default: 'CymtbB6Al/lD5z01Nfzp1SKzTj2F0A==',
      uat: '0m1pNGQiDYn5YmrY1NHMZ/xPeIubJXF2J/sV+0irIw==',
      sandbox: 'CymtbBAl/lD5z01NfzSKzTj2F0A==',
      prod: '0m1pNGQiDY8Sn5YmrY1NHMZ/xPeIuiwbJXF2J/sV+0irIw=='
    }
  }
}
```

In the above example each configuration property can have a different value for each environment or can always have the same value (node_path in the above will be the same value for all environments).

The configuration system supports encryption of properties if needed, to enable encryption you need to add the "encrypted" key as in the courier.api_key field above. The configuration is initialised once when the process starts and uses environment variables to determine which environment we're in and which encryption key and salt to use for decryption.

You can have default values, so if all environments except prod for example have the same value, you can set the default key to this value and just add a live key for the live setting (see the dev key for an example of this approach above) which helps to minimise configuration.

All properties that need to specify different values for each environment must include the "default" key, this is used to indicate the property is a config property not a parent object such as the courier property in the above example.
